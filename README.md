# XSV

XSV is an intermediary text format for interchange between relation databases and spreadsheets. It is based on the [TSV](https://en.wikipedia.org/wiki/Tab-separated_values) (tab-separated values) format, with extra features like subsectioning (derived from [MIME multipart messages](https://en.wikipedia.org/wiki/MIME#Multipart_messages)), filesystem modeling, and supports [JSON](https://en.wikipedia.org/wiki/JSON)-compatible cell values.

The XSV format encodes data in a file in a tabular structure (called a table). An XSV file has the `.xsv` extension. The contents of an XSV file must be UTF-8 encoded (a superset of US-ASCII). It consists of an optional header, plus zero ore more rows of data.

The header, which gives a name to zero or more columns, is separated from the body containing the rows of data with carriage-return plus newline characters (`\r\n`). Column values are separated by tabs (`\t`). The naming convention for a column is that it can contain only alphanumeric characters (digits `0-9`, lowercase letters `a-z` and uppercase letters `A-Z`) and underscores (`_`), and should not start with a digit; a single underscore (`_`) as name is allowed and represents an anonymous column. Each column value should be unique.

Each row of data is separated from the next one with a newline character (`\n`) and contains one or more JSON scalar values separated by tabs; a separate row value is called a cell. A cell can be empty, which is the same as the empty string in JSON (`""`).

XSV supports the following values: the empty value (`null`), boolean values (`true` or `false`), number values (like `1`,`2.1`, `-2`, `2e3`) and string values, but without the double quotes and without escaped double quotes: so `String without double quotes and escaped " (double quote).` instead of `"String with double quotes and escaped \" (double quote)."`. With the exception of the escaped double quote (which is unneccesary in XSV) a string value can contain any of the other [JSON-escapes](https://www.json.org): Unicode codepoints, tab, carriage-return, newline, formfeed, backspace, forward-slash and backslash. The composite array and object values are not supported as XSV cell values, but are modelled as rows and headers respectively.

XSV also supports encoding more than one table in one file. The boundary consists of two hyphens (`--`) on its own line before each included table, followed by a unique name (for each boundary), which follows the above naming convention, e.g. `--unique_table_name`. The name represent the table name in a relational database, or the sheet name in a spreadsheet.  It is allowed to include a boundary when there is no or only one table present in the file: this represents an empty table in a relational database, or an empty sheet in a spreadsheet. When the file contains at least one boundary the end of the file should contain an empty boundary on its own line (so just `--`).
